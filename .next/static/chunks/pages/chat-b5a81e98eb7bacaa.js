(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[180],{5129:function(r,e,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/chat",function(){return t(4981)}])},4981:function(r,e,t){"use strict";t.r(e),t.d(e,{default:function(){return w}});var n=t(5893),a=t(5717),i=t(9908),s=t(7604),o=t(7294),l=t(1181),u=t(1163);function c(r,e){(null==e||e>r.length)&&(e=r.length);for(var t=0,n=new Array(e);t<e;t++)n[t]=r[t];return n}function h(r,e){return function(r){if(Array.isArray(r))return r}(r)||function(r,e){var t=null==r?null:"undefined"!==typeof Symbol&&r[Symbol.iterator]||r["@@iterator"];if(null!=t){var n,a,i=[],s=!0,o=!1;try{for(t=t.call(r);!(s=(n=t.next()).done)&&(i.push(n.value),!e||i.length!==e);s=!0);}catch(l){o=!0,a=l}finally{try{s||null==t.return||t.return()}finally{if(o)throw a}}return i}}(r,e)||function(r,e){if(!r)return;if("string"===typeof r)return c(r,e);var t=Object.prototype.toString.call(r).slice(8,-1);"Object"===t&&r.constructor&&(t=r.constructor.name);if("Map"===t||"Set"===t)return Array.from(t);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return c(r,e)}(r,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function g(r){var e=h(o.useState(""),2),t=e[0],i=e[1];return(0,n.jsxs)(a.xu,{styleSheet:{position:"relative"},children:[(0,n.jsx)(a.zx,{styleSheet:{borderRadius:"50%",padding:"0 3px 0 0",minWidth:"50px",minHeight:"50px",fontSize:"20px",marginBottom:"8px",lineHeight:"0",display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:l.rS.O.O.wl,filter:t?"grayscale(0)":"grayscale(1)",hover:{filter:"grayscale(0)"}},label:"\ud83d\ude0b",onClick:function(){return i(!t)}}),t&&(0,n.jsxs)(a.xu,{styleSheet:{display:"flex",flexDirection:"column",borderRadius:"5px",position:"absolute",backgroundColor:l.rS.O.O.YY,width:{xs:"200px",sm:"290px"},height:"300px",right:"30px",bottom:"30px",padding:"16px",boxShadow:"rgba(4, 4, 5, 0.15) 0px 0px 0px 1px, rgba(0, 0, 0, 0.24) 0px 8px 16px 0px"},onClick:function(){return i(!1)},children:[(0,n.jsx)(a.xv,{styleSheet:{color:l.rS.O.O.M6,fontWeight:"bold"},children:"Stickers"}),(0,n.jsx)(a.xu,{tag:"ul",styleSheet:{display:"flex",flexWrap:"wrap",justifyContent:"space-between",flex:1,paddingTop:"16px",overflow:"scroll"},children:l.xe.map((function(e){return(0,n.jsx)(a.xv,{onClick:function(){Boolean(r.onStickerClick)&&r.onStickerClick(e)},tag:"li",styleSheet:{width:"50%",borderRadius:"5px",padding:"10px",focus:{backgroundColor:l.rS.O.O.RW},hover:{backgroundColor:l.rS.O.O.RW}},children:(0,n.jsx)(a.Ee,{alt:"sticker",src:e})},e)}))})]})]})}function p(r,e){(null==e||e>r.length)&&(e=r.length);for(var t=0,n=new Array(e);t<e;t++)n[t]=r[t];return n}function f(r,e){return function(r){if(Array.isArray(r))return r}(r)||function(r,e){var t=null==r?null:"undefined"!==typeof Symbol&&r[Symbol.iterator]||r["@@iterator"];if(null!=t){var n,a,i=[],s=!0,o=!1;try{for(t=t.call(r);!(s=(n=t.next()).done)&&(i.push(n.value),!e||i.length!==e);s=!0);}catch(l){o=!0,a=l}finally{try{s||null==t.return||t.return()}finally{if(o)throw a}}return i}}(r,e)||d(r,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function m(r){return function(r){if(Array.isArray(r))return p(r)}(r)||function(r){if("undefined"!==typeof Symbol&&null!=r[Symbol.iterator]||null!=r["@@iterator"])return Array.from(r)}(r)||d(r)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function d(r,e){if(r){if("string"===typeof r)return p(r,e);var t=Object.prototype.toString.call(r).slice(8,-1);return"Object"===t&&r.constructor&&(t=r.constructor.name),"Map"===t||"Set"===t?Array.from(t):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?p(r,e):void 0}}var x=(0,t(6186).eI)("https://vdxbonxyqcnlsnexuonn.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJyb2xlIjoiYW5vbiIsImlhdCI6MTY0MzU2NDMzNSwiZXhwIjoxOTU5MTQwMzM1fQ.IkzH1xC7smVNoD-HeuCl8H4H2yvGl9kBkNxP6n8eZYU");function w(){var r=function(r){if(0!=r.length){var e={de:h,texto:r};x.from("mensagens").insert([e]).then((function(r){var e=r.data;w([e[0]].concat(m(d))),c("")}))}},e=f(o.useState(""),2),t=e[0],c=e[1],h=(0,u.useRouter)().query.username,p=f(o.useState([]),2),d=p[0],w=p[1],v=f(o.useState(!0),2),S=v[0],j=v[1];return o.useEffect((function(){x.from("mensagens").select("*").order("id",{ascending:!1}).then((function(r){var e=r.data;console.log("Dados da consulta"),w(e),j(!1)})),x.from("mensagens").on("INSERT",(function(r){console.log("O que ve",r)})).subscribe()}),[]),(0,n.jsx)(a.xu,{styleSheet:{display:"flex",alignItems:"center",justifyContent:"center",backgroundRepeat:"no-repeat",backgroundSize:"cover",backgroundBlendMode:"multiply",color:l.rS.O.O.M6},children:(0,n.jsxs)(a.xu,{styleSheet:{display:"flex",flexDirection:"column",flex:1,boxShadow:"0 2px 10px 0 rgb(0 0 0 / 20%)",backgroundColor:l.rS.O.O.qy,height:"100%",maxWidth:"100%",maxHeight:"100vh",padding:"20px"},children:[(0,n.jsx)(b,{}),(0,n.jsxs)(a.xu,{styleSheet:{position:"relative",display:"flex",flex:1,height:"80%",backgroundColor:l.rS.O.O.RW,flexDirection:"column",borderRadius:"5px",padding:"16px"},children:[(0,n.jsx)(y,{mensagens:d,setMensagens:w,setBackdrop:j}),(0,n.jsxs)(a.xu,{as:"form",styleSheet:{display:"flex",alignItems:"center"},children:[(0,n.jsx)(a.nv,{value:t,onChange:function(r){var e=r.target.value;c(e)},onKeyPress:function(e){"Enter"===e.key&&(e.preventDefault(),r(t))},placeholder:"Insira sua mensagem aqui...",type:"textarea",styleSheet:{width:"100%",border:"0",resize:"none",borderRadius:"5px",padding:"6px 8px",backgroundColor:l.rS.O.O.YY,marginRight:"12px",color:l.rS.O.O.Ug}}),(0,n.jsx)(g,{onStickerClick:function(e){console.log("[Usando o component]",e),r(":sticker:"+e)}}),(0,n.jsx)(i.Z,{sx:{color:"#fff",zIndex:function(r){return r.zIndex.drawer+1}},open:S,children:(0,n.jsx)(s.Z,{color:"inherit"})})]})]})]})})}function b(){return(0,n.jsx)(n.Fragment,{children:(0,n.jsxs)(a.xu,{styleSheet:{width:"100%",marginBottom:"16px",display:"flex",alignItems:"center",justifyContent:"space-between"},children:[(0,n.jsx)(a.xv,{variant:"heading5",children:"Chat"}),(0,n.jsx)(a.zx,{variant:"tertiary",colorVariant:"neutral",href:"/",iconName:"FaArrowRight"})]})})}function y(r){console.log(r);var e=r.mensagens,t=r.setMensagens,i=r.setBackdrop;return(0,n.jsx)(a.xu,{tag:"ul",styleSheet:{overflowY:"scroll",scrollBehavior:"smooth",display:"flex",flexDirection:"column-reverse",flex:1,color:l.rS.O.O.M6,marginBottom:"16px"},children:r.mensagens.map((function(r){return(0,n.jsxs)(a.xv,{tag:"li",styleSheet:{borderRadius:"5px",padding:"6px",marginBottom:"12px",hover:{backgroundColor:l.rS.O.O.qy}},children:[(0,n.jsxs)(a.xu,{styleSheet:{position:"relative",marginBottom:"8px",display:"flex",flexDirection:"row",alignItems:"center"},children:[(0,n.jsx)("a",{href:"https://github.com/".concat(r.de),children:(0,n.jsx)(a.Ee,{alt:"pessoa",styleSheet:{width:"20px",height:"20px",borderRadius:"50%",display:"inline-block",marginRight:"8px",hover:{transform:"scale(1.1)"}},src:"https://github.com/".concat(r.de,".png")})}),(0,n.jsx)(a.xv,{tag:"strong",children:r.de}),(0,n.jsx)(a.xv,{styleSheet:{fontSize:"10px",marginLeft:"8px",color:l.rS.O.O.wl},tag:"span",children:(new Date).toLocaleDateString()}),(0,n.jsx)(a.zx,{label:"\u2718",onClick:function(){return n=r.id,i(!0),void x.from("mensagens").delete().match({id:n}).then((function(){var r=e.filter((function(r){return r.id!=n}));t(r),i(!1)}));var n},styleSheet:{position:"absolute",right:"0",marginRight:"10px",width:"10px",height:"10px"}})]}),r.texto.startsWith(":sticker:")?(0,n.jsx)(a.Ee,{alt:"sticker",src:r.texto.replace(":sticker:",""),styleSheet:{width:{xs:"200px",sm:"290px"}}}):r.texto]},r.id)}))})}},1181:function(r){"use strict";r.exports=JSON.parse('{"u2":"Port.io","rS":{"O":{"$":{"aD":"#009BF5","pl":"#0081CC","RW":"#0067A3"},"O":{"Ug":"#CBD2D9","wl":"#9AA5B1","RW":"#29333D","qy":"#212931","YY":"#181F25","H":"#101418","jh":"#080A0C","M6":"#FFFFFF"}}},"xe":["https://www.alura.com.br/imersao-react-4/assets/figurinhas/Figurinha_1.png","https://www.alura.com.br/imersao-react-4/assets/figurinhas/Figurinha_2.png","https://www.alura.com.br/imersao-react-4/assets/figurinhas/Figurinha_3.png","https://www.alura.com.br/imersao-react-4/assets/figurinhas/Figurinha_4.png","https://www.alura.com.br/imersao-react-4/assets/figurinhas/Figurinha_5.png","https://www.alura.com.br/imersao-react-4/assets/figurinhas/Figurinha_6.png","https://www.alura.com.br/imersao-react-4/assets/figurinhas/Figurinha_7.png","https://www.alura.com.br/imersao-react-4/assets/figurinhas/Figurinha_8.png","https://www.alura.com.br/imersao-react-4/assets/figurinhas/Figurinha_9.png","https://www.alura.com.br/imersao-react-4/assets/figurinhas/Figurinha_10.png","https://www.alura.com.br/imersao-react-4/assets/figurinhas/Figurinha_11.png","https://www.alura.com.br/imersao-react-4/assets/figurinhas/Figurinha_12.png","https://www.alura.com.br/imersao-react-4/assets/figurinhas/Figurinha_13.png","https://www.alura.com.br/imersao-react-4/assets/figurinhas/Figurinha_14.png","https://www.alura.com.br/imersao-react-4/assets/figurinhas/Figurinha_15.png","https://www.alura.com.br/imersao-react-4/assets/figurinhas/Figurinha_16.png","https://www.alura.com.br/imersao-react-4/assets/figurinhas/Figurinha_17.png","https://img.favpng.com/17/15/15/league-of-legends-world-championship-sticker-intel-extreme-masters-riot-games-png-favpng-8V959PxXK8ZtQ5NFHBJWHFwM5.jpg","https://www.alura.com.br/imersao-react-4/assets/figurinhas/Figurinha_18.png","https://www.alura.com.br/imersao-react-4/assets/figurinhas/Figurinha_19.png","https://i.pinimg.com/originals/66/53/15/665315c31304d67cf14709570d797912.png","https://www.alura.com.br/imersao-react-4/assets/figurinhas/Figurinha_20.png","https://www.alura.com.br/imersao-react-4/assets/figurinhas/Figurinha_21.png","https://www.alura.com.br/imersao-react-4/assets/figurinhas/Figurinha_22.png","https://www.alura.com.br/imersao-react-4/assets/figurinhas/Figurinha_23.png","https://www.alura.com.br/imersao-react-4/assets/figurinhas/Figurinha_24.png","https://www.alura.com.br/imersao-react-4/assets/figurinhas/Figurinha_25.png","https://www.alura.com.br/imersao-react-4/assets/figurinhas/Figurinha_26.png","https://www.alura.com.br/imersao-react-4/assets/figurinhas/Figurinha_27.png","https://www.alura.com.br/imersao-react-4/assets/figurinhas/Figurinha_28.png","https://www.alura.com.br/imersao-react-4/assets/figurinhas/Figurinha_29.png","https://www.alura.com.br/imersao-react-4/assets/figurinhas/Figurinha_30.png","http://2.bp.blogspot.com/-d21tffsTIQo/U_H9QjC69gI/AAAAAAAAKqM/wnvOyUr6a_I/s1600/Pikachu%2B2.gif","https://media1.giphy.com/media/BdghqxNFV4efm/200.gif","https://c.tenor.com/TKpmh4WFEsAAAAAC/alura-gaveta-filmes.gif","https://i.pinimg.com/originals/0b/1c/23/0b1c2307c83e1ebdeed72e41b9a058ad.gif","https://c.tenor.com/VylWt5lyjBoAAAAC/omg-yes.gif","https://i.pinimg.com/originals/96/34/c5/9634c520c9a3cd4e7f23190bb2c96500.gif"]}')}},function(r){r.O(0,[445,497,887,774,888,179],(function(){return e=5129,r(r.s=e);var e}));var e=r.O();_N_E=e}]);